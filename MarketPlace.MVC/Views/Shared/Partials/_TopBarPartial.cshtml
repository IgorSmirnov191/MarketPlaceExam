
@using MarketPlace.MVC.Infrastructure
@using MarketPlaceExam.Data.Entities
@using Microsoft.AspNetCore.Identity
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager

<div class="top_bar">
    <div class="container">
        <div class="row">
              <div class="col d-flex flex-row ml-auto">
                <div class="top_bar_content ml-auto">
                    @if (SignInManager.IsSignedIn(this.User))
                    {
                        <div class="top_bar_user ml-auto">

                            @if (this.User.IsInRole(GlobalConstants.AdministratorRole))
                            {
                                <div class="top_bar_user ml-auto">
                                    <form class="form-inline" asp-area="Administrator" asp-controller="Home" asp-action="Index" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                                        <button type="submit" class="nav-link btn btn-link text-white bg-success">Control Panel</button>
                                    </form>
                                </div>

                                <div class="top_bar_user ml-auto">
                                    <a asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">
                                        @User.Identity.Name
                                        <div>
                                            <div class="top_bar_icon"></div>
                                            <img src="~/images/user.png" alt="user-icon">
                                        </div>
                                    </a>
                                </div>
                                <div class="top_bar_user ml-auto">
                                    <form class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                                        <button type="submit" class="nav-link btn btn-link text-dark">Logout</button>
                                    </form>
                                </div>
                            }
                            else
                            {
                                <div class="top_bar_user ml-auto">
                                    <a asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">
                                        Hello, @User.Identity.Name!
                                        <div>
                                            <div class="top_bar_icon"></div>
                                            <img src="~/images/user.png" alt="user-icon">
                                        </div>
                                    </a>
                                </div>

                                <div class="top_bar_user ml-auto">
                                    <form class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                                        <button type="submit" class="nav-link btn btn-link text-dark">Logout</button>
                                    </form>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <div class="top_bar_user">
                            <div class="mr-3"><a asp-area="Identity" asp-page="/Account/Register"><div class="user_icon"><img src="~/images/user.svg" alt=""></div>Register</a></div>
                            <div class="ml-auto"><a asp-area="Identity" asp-page="/Account/Login"><div><i class="fas fa-sign-in-alt"></i></div> Sign in</a></div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>